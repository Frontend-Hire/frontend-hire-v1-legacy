export const meta = {
  title: 'Refactor: Long Method - 1',
  difficulty: 'medium',
  skills: ['js', 'jest'],
  description:
    "Most common code smells are easy to spot. Long methods are one of them. Refactor it to make it more readable and maintainable.",
  template: 'test-ts',
  recommendedLayout: 'col-2',
  questionNumber: 10,
  files: {
    '/index.js': {
      code: `export const processSalesData = () => {
  // Filter valid sales records
  let validSales = [];
  for (let i = 0; i < salesData.length; i++) {
    if (salesData[i].amount > 0) {
      validSales.push(salesData[i]);
    }
  }

  // Calculate total sales
  let totalSales = 0;
  for (let i = 0; i < validSales.length; i++) {
    totalSales += validSales[i].amount;
  }

  return totalSales;
};
`,
      active: true
    },
    '/index.test.js': {
      code: `import { processSalesData } from "./index";

// WRITE ALL TESTS BEFORE YOU START REFACTORING
describe("Process Sales Data", () => {});
`},
    '/add.test.ts': {
      code: '',
      hidden: true,
    }
  },
  showTests: true,
  showConsole: true,
};

# Refactoring: Long Method - 1

> Why do programmers dislike going to the gym?
> Because they lose their breath just scrolling through long methods!

## Objectives
- Identify areas in the 'processSalesData' function that can be refactored.
- Write tests to confirm the current behaviour of the function.
- Apply the 'Extract Method' technique to break down the function into smaller, more manageable parts.
- Ensure that the refactored code passes all the provided tests.


## Tests

Consider writing tests for the following scenarios:
- The function correctly calculates the total sales for valid sales records.
- The function ignores sales records with negative amounts.
- The function handles an empty array without errors.


#### Resources

- <a target="_blank" href="https://refactoring.guru/smells/long-method">Refactoring Guru: Long Method</a>
- <a target="_blank" href="https://refactoring.guru/extract-method">Refactoring Guru: Extract Method</a>