export const meta = {
  title: 'useEffect - 2',
  difficulty: 'medium',
  skills: ['react'],
  description:
    "This task involves identifying and resolving a bug caused by the absence of a cleanup function in a useEffect hook.",
  template: 'react',
  files: {
    '/App.js': {
      code: `import React, { useState } from 'react';
import WindowWidthDisplay from './WindowWidthDisplay';

const App = () => {
  const [showComponent, setShowComponent] = useState(true);

  return (
    <div>
      <button onClick={() => setShowComponent(!showComponent)}>
        Toggle WindowWidthDisplay
      </button>
      {showComponent && <WindowWidthDisplay />}
    </div>
  );
};

export default App;
`,
      active: true
    },
    '/WindowWidthDisplay.js': {
      code: `import React, { useState, useEffect } from 'react';

const WindowWidthDisplay = () => {
  const [windowWidth, setWindowWidth] = useState(window.innerWidth);

  useEffect(() => {
    const handleResize = () => {
      console.log('Resizing...');
      setWindowWidth(window.innerWidth);
    };

    window.addEventListener('resize', handleResize);
  }, []);

  return <p>The current window width is: {windowWidth}px</p>;
};

export default WindowWidthDisplay;
`,
      active: false
    }
  },
  showConsole: true,
  showPreview: true,
};

# useEffect - 2

> What happens when a React component forgets to clean up after itself?
> It leaves behind a trail of events!

## Objectives
- Identify and resolve the bug caused by the missing cleanup function in the `WindowWidthDisplay` component's `useEffect` hook.
- Implement a cleanup function to properly remove the event listener when the `WindowWidthDisplay` component unmounts.
- It is difficult to notice the bug in this example (console logs might help), but it is important to understand the consequences of not cleaning up after a component.
- Understand the importance of cleaning up in React, especially when the component is part of a larger application.

#### Resources

- <a target="_blank" href="https://react.dev/reference/react/useEffect">React Docs: useEffect Hook</a>
- <a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/resize_event">MDN Web Docs: Window resize event</a>
